(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2158a490"],{"1c83":function(t,e,o){"use strict";var n=o("1ed8"),a=o.n(n);a.a},"1ed8":function(t,e,o){},"845e":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page"},[o("TitleBar",{attrs:{titleTx:t.title}}),o("q-input",{staticClass:"input-data",attrs:{"float-label":"收款人地址"},model:{value:t.toAddress,callback:function(e){t.toAddress=e},expression:"toAddress"}}),o("q-input",{staticClass:"input-data",attrs:{"float-label":"转账金额",type:"number"},model:{value:t.toAmt,callback:function(e){t.toAmt=e},expression:"toAmt"}}),o("span",{staticClass:"curt-balance"},[t._v("当前余额:"+t._s(Number(t.currentBalance).toFixed(4)))]),o("q-btn",{staticClass:"btn-next",attrs:{label:"下一步",color:"primary"},on:{click:t.toNext}})],1)},a=[];n._withStripped=!0;o("6b54");var s=o("9bfb"),i=o("e7ea"),l=o("a002"),c=o.n(l),r=o("96a1"),u=o("3452"),h={components:{TitleBar:s["a"]},data:function(){return{currentBalance:"MCOIN"===this.$route.query.p1?this.global.wallet.lastMcoinBalance:this.global.wallet.lastEthbalance,title:"MCOIN"===this.$route.query.p1?"CMAT转账":"ETH转账",toAddress:"",toAmt:""}},mounted:function(){console.log("-------------"+this.$route.query.p1)},methods:{toNext:function(){""!==this.toAddress?""!==this.toAmt?this.showPswdInputDialog():toast("转账金额不能为空哦"):toast("收款地址不能为空哦")},showPswdInputDialog:function(t){console.log(new Date);var e=this;this.$q.dialog({title:this.itmeName1,message:"请输入你的钱包密码",prompt:{model:"",type:"text"},cancel:!0,color:"secondary"}).then(function(t){""===t?toast("密码不能为空哦"):(console.log(new Date),e.$q.loading.show({message:"正在提交交易，请稍后...",spinnerSize:50}),console.log(new Date),c.a.getItem("cryptMnemonic").then(function(o){null===o?(e.$q.loading.hide(),toast("当前没有可备份钱包，将跳到创建钱包页面"),e.$router.push("/walletfirst")):e.unlockWallet(o,t)}).catch(function(t){toast(t)}))}).catch(function(){})},unlockWallet:function(t,e){try{var o=u.AES.decrypt(t,e),n=o.toString(u.enc.Utf8),a=i["ethers"].Wallet.fromMnemonic(n),s=a.connect(this.global.defaultProvider);console.log("-------------"+this.$route.query.p1),"ETH"===this.$route.query.p1?this.transferETH(s):this.tansferMcoin(s)}catch(t){console.log(t),toast("密码错误"),this.$q.loading.hide()}},tansferMcoin:function(t){var e=this,o=this.global.m3gameContract.connect(t),n=18,a=i["ethers"].utils.parseUnits(e.toAmt+"",n);o.transfer(e.toAddress,a).then(function(t){console.log(t),e.$q.loading.hide(),e.showInfoDialog("转账已提交",t.hash)}).catch(function(){toast("矿工费不足"),e.$q.loading.hide()})},transferETH:function(t){var e=this,o={to:this.toAddress,value:i["ethers"].utils.parseEther(this.toAmt+"")},n=t.sendTransaction(o);n.then(function(t){console.log(t),e.$q.loading.hide(),e.showInfoDialog("转账已提交",t.hash)}).catch(function(){toast("矿工费不足"),e.$q.loading.hide()})},showInfoDialog:function(t,e){var o=this;this.$q.dialog({title:t,message:"",ok:"查看结果",cancel:"关闭"}).then(function(){o.$router.go(-1),Object(r["a"])(o.global.etherscanio+"tx/"+e)}).catch(function(){o.$router.go(-1)})}}},d=h,f=(o("1c83"),o("2877")),p=Object(f["a"])(d,n,a,!1,null,null,null);p.options.__file="TransferEth.vue";e["default"]=p.exports},"9bfb":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"title-bar"},[o("q-icon",{staticClass:"back-icon",attrs:{name:"navigate_before"},nativeOn:{click:function(e){return t.goBack(e)}}}),o("div",{staticClass:"title-tx"},[t._v(t._s(t.titleTx))])],1)},a=[];n._withStripped=!0;var s={props:["titleTx"],methods:{goBack:function(){this.$router.go(-1)}}},i=s,l=(o("a675"),o("2877")),c=Object(l["a"])(i,n,a,!1,null,null,null);c.options.__file="TitleBar.vue";e["a"]=c.exports},a675:function(t,e,o){"use strict";var n=o("ca51"),a=o.n(n);a.a},ca51:function(t,e,o){}}]);